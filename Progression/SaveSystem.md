# üíæ Save System

> **–°–∫—Ä–∏–ø—Ç—ã:**  
> - `Scripts/Services/SaveLoaderService.cs` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å  
> - `Scripts/Services/ProgressSaver.cs` ‚Äî –±—ã—Å—Ç—Ä–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

---

## ‚úÖ Current (As-Is)
- JSON —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ SaveManager
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç: Lucid Points, Shards, Loneliness, Stress
- Dream Hub / Nightmare Hub —É—Ä–æ–≤–Ω–∏ (unlocked/completed)
- Completed objectives (—Ü–µ–ª–∏/–∫–≤–µ—Å—Ç—ã)
- –ü–æ—Å–ª–µ–¥–Ω–∏–π —Ö–∞–± (DreamHub / NightmareHub)
- VContainer DI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

## üß© Known Issues / TODO
- [ ] –î–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ª–æ—Ç–æ–≤ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- [ ] Cloud save –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [ ] –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ–π–≤–æ–≤

## üí° Notes
- –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å–µ–π–≤–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π —Å 3 —É—Ä–æ–≤–Ω—è–º–∏ –Ω–∞ —Ö–∞–±
- –°–æ–±—ã—Ç–∏—è `OnLoaded` –∏ `OnReset` –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º

---

## üìä –ß—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

| –î–∞–Ω–Ω—ã–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|
| Lucid Points | –û—Å–Ω–æ–≤–Ω–∞—è –≤–∞–ª—é—Ç–∞ |
| Shards | –í—Ç–æ—Ä–∏—á–Ω–∞—è –≤–∞–ª—é—Ç–∞ |
| Loneliness | –ü–æ–∫–∞–∑–∞—Ç–µ–ª—å –æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–∞ (0-100%) |
| Stress | –ü–æ–∫–∞–∑–∞—Ç–µ–ª—å —Å—Ç—Ä–µ—Å—Å–∞ (0-100%) |
| Last Hub | Dream Hub –∏–ª–∏ Nightmare Hub |
| Levels Progress | –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ / –ü—Ä–æ–π–¥–µ–Ω–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ö–∞–±–∞ |
| Cutscene Shown | –ü–æ–∫–∞–∑–∞–Ω–∞ –ª–∏ –≤—Å—Ç—É–ø–∏—Ç–µ–ª—å–Ω–∞—è –∫–∞—Ç—Å—Ü–µ–Ω–∞ |
| Objectives | –°–ø–∏—Å–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —Ü–µ–ª–µ–π |

---

## üîÑ Flow

| Action | Response |
|--------|----------|
| `Load()` | –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ —Ñ–∞–π–ª–∞ ‚Üí –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫ BoolVar/IntVar ‚Üí `OnLoaded` |
| `Save()` | –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö ‚Üí —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è ‚Üí –∑–∞–ø–∏—Å—å –≤ —Ñ–∞–π–ª |
| `Reset()` | –°–±—Ä–æ—Å –≤—Å–µ—Ö –∑–Ω–∞—á–µ–Ω–∏–π ‚Üí `OnReset` |
| `CompleteObjective(id)` | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ completedObjectives + Save |

---

## üîó Dependencies

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°–≤—è–∑—å |
|-----------|-------|
| **SaveManager** | –ù–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π I/O |
| **IntVar / BoolVar** | Malbers ScriptableVariables |
| **FloatClampedVar** | Clamped –∑–Ω–∞—á–µ–Ω–∏—è |
| **SaveLoaderConfig** | –ö–æ–Ω—Ñ–∏–≥ —Å —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ |
| **ObjectiveService** | –ü–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ `OnLoaded`/`OnReset` |

---

---

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

| –î–µ–π—Å—Ç–≤–∏–µ | –ö–æ–≥–¥–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç |
|----------|------------------|
| –ó–∞–≥—Ä—É–∑–∫–∞ —Å–µ–π–≤–∞ | –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –∏–≥—Ä—ã |
| –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ | –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ |
| –°–±—Ä–æ—Å | –ß–µ—Ä–µ–∑ –º–µ–Ω—é "–ù–æ–≤–∞—è –∏–≥—Ä–∞" |
| –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è UI | –ü–æ —Å–æ–±—ã—Ç–∏—é OnLoaded |
